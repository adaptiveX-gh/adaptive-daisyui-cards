@tailwind base;
@tailwind components;
@tailwind utilities;

/* =================================================================
   THEME-SPECIFIC TYPOGRAPHY SYSTEM
   Typography variables that adapt to each DaisyUI theme's personality
   ================================================================= */

@layer base {

  /* DEFAULT: Classic/Professional Typography (light, dark, corporate, business, emerald, forest, winter) */
  :root,
  [data-theme="light"],
  [data-theme="dark"],
  [data-theme="corporate"],
  [data-theme="business"],
  [data-theme="emerald"],
  [data-theme="forest"],
  [data-theme="winter"] {
    --typo-heading-weight: 700;
    --typo-heading-spacing: -0.02em;
    --typo-heading-transform: none;
    --typo-heading-line-height: 1.2;

    --typo-body-weight: 400;
    --typo-body-spacing: 0;
    --typo-body-line-height: 1.6;

    --typo-emphasis-weight: 600;
    --typo-scale-adjust: 1;
  }

  /* BOLD/FUTURISTIC: Heavy, wide spacing, uppercase tendencies (cyberpunk, synthwave, dracula, night, black, luxury) */
  [data-theme="cyberpunk"],
  [data-theme="synthwave"],
  [data-theme="dracula"],
  [data-theme="night"],
  [data-theme="black"],
  [data-theme="luxury"] {
    --typo-heading-weight: 900;
    --typo-heading-spacing: 0.05em;
    --typo-heading-transform: uppercase;
    --typo-heading-line-height: 1.1;

    --typo-body-weight: 500;
    --typo-body-spacing: 0.02em;
    --typo-body-line-height: 1.5;

    --typo-emphasis-weight: 700;
    --typo-scale-adjust: 1.05;
  }

  /* SOFT/PASTEL: Light weights, tight spacing, rounded feel (cupcake, pastel, valentine, fantasy, garden, lemonade) */
  [data-theme="cupcake"],
  [data-theme="pastel"],
  [data-theme="valentine"],
  [data-theme="fantasy"],
  [data-theme="garden"],
  [data-theme="lemonade"] {
    --typo-heading-weight: 600;
    --typo-heading-spacing: 0;
    --typo-heading-transform: none;
    --typo-heading-line-height: 1.3;

    --typo-body-weight: 400;
    --typo-body-spacing: 0;
    --typo-body-line-height: 1.7;

    --typo-emphasis-weight: 500;
    --typo-scale-adjust: 0.97;
  }

  /* QUIRKY/RETRO: Varied weights, playful spacing, expressive (retro, acid, halloween, bumblebee, aqua, cmyk, autumn, coffee, lofi, wireframe) */
  [data-theme="retro"],
  [data-theme="acid"],
  [data-theme="halloween"],
  [data-theme="bumblebee"],
  [data-theme="aqua"],
  [data-theme="cmyk"],
  [data-theme="autumn"],
  [data-theme="coffee"],
  [data-theme="lofi"],
  [data-theme="wireframe"] {
    --typo-heading-weight: 800;
    --typo-heading-spacing: -0.01em;
    --typo-heading-transform: none;
    --typo-heading-line-height: 1.15;

    --typo-body-weight: 400;
    --typo-body-spacing: 0.01em;
    --typo-body-line-height: 1.6;

    --typo-emphasis-weight: 700;
    --typo-scale-adjust: 1.02;
  }
}

/* =================================================================
   ADAPTIVE CARD SYSTEM - Base Styles
   Cards that scale based on their container size using Container Queries
   ================================================================= */

@layer components {

  /* Card container - provides container query context */
  .card-container {
    container-type: inline-size;
    container-name: card;
  }

  /* Base adaptive card */
  .adaptive-card {
    @apply card bg-base-100 shadow-xl;
    container-type: inline-size;
    transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Layout card base (for all layout types) */
  .layout-card {
    @apply card bg-base-100 shadow-xl rounded-2xl;
    transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* =================================================================
     SCALABLE TYPOGRAPHY WITH THEME-AWARE STYLES
     Font sizes scale proportionally with container width
     Typography characteristics adapt to theme personality
     ================================================================= */

  .adaptive-text-xs {
    font-size: calc(clamp(0.75rem, 1.5cqw, 0.875rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-body-weight);
    letter-spacing: var(--typo-body-spacing);
    line-height: var(--typo-body-line-height);
  }

  .adaptive-text-sm {
    font-size: calc(clamp(0.875rem, 2cqw, 1rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-body-weight);
    letter-spacing: var(--typo-body-spacing);
    line-height: var(--typo-body-line-height);
  }

  .adaptive-text-base {
    font-size: calc(clamp(1rem, 2.5cqw, 1.125rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-body-weight);
    letter-spacing: var(--typo-body-spacing);
    line-height: var(--typo-body-line-height);
  }

  .adaptive-text-lg {
    font-size: calc(clamp(1.125rem, 3cqw, 1.25rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-emphasis-weight);
    letter-spacing: var(--typo-heading-spacing);
    line-height: var(--typo-heading-line-height);
  }

  .adaptive-text-xl {
    font-size: calc(clamp(1.25rem, 3.5cqw, 1.5rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-emphasis-weight);
    letter-spacing: var(--typo-heading-spacing);
    line-height: var(--typo-heading-line-height);
  }

  .adaptive-text-2xl {
    font-size: calc(clamp(1.5rem, 4cqw, 2rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-heading-weight);
    letter-spacing: var(--typo-heading-spacing);
    line-height: var(--typo-heading-line-height);
  }

  .adaptive-text-3xl {
    font-size: calc(clamp(1.875rem, 5cqw, 2.5rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-heading-weight);
    letter-spacing: var(--typo-heading-spacing);
    line-height: var(--typo-heading-line-height);
  }

  /* =================================================================
     LAYOUT 1: SIDEBAR LAYOUT
     Image on left/top, content on right/bottom
     ================================================================= */

  .sidebar-layout {
    display: flex;
    flex-direction: row;
    overflow: hidden;
  }

  .sidebar-layout .sidebar-image {
    width: 300px;
    min-width: 300px;
    height: auto;
    object-fit: cover;
  }

  .sidebar-layout .sidebar-content {
    padding: clamp(1rem, 4cqw, 2rem);
    display: flex;
    flex-direction: column;
    flex: 1;
  }

  /* Small containers: vertical stack */
  @container card (max-width: 599px) {
    .sidebar-layout {
      flex-direction: column;
    }

    .sidebar-layout .sidebar-image {
      width: 100%;
      min-width: 100%;
      height: 200px;
    }
  }

  /* =================================================================
     LAYOUT 2: FEATURE LAYOUT
     Header + responsive grid (1-3 columns)
     ================================================================= */

  .feature-layout {
    padding: clamp(1rem, 3cqw, 2rem);
  }

  .feature-layout .feature-header {
    margin-bottom: clamp(1rem, 3cqw, 2rem);
  }

  .feature-layout .feature-grid {
    display: grid;
    gap: clamp(1rem, 3cqw, 1.5rem);
  }

  /* 1 column for small containers */
  @container card (max-width: 399px) {
    .feature-layout .feature-grid {
      grid-template-columns: 1fr;
    }
  }

  /* 2 columns for medium containers */
  @container card (min-width: 400px) and (max-width: 599px) {
    .feature-layout .feature-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* 3 columns for large containers */
  @container card (min-width: 600px) {
    .feature-layout .feature-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .feature-layout .feature-item {
    padding: clamp(0.75rem, 2cqw, 1.5rem);
    @apply bg-base-200 rounded-lg;
  }

  /* =================================================================
     LAYOUT 3: MASONRY LAYOUT
     Image gallery with responsive columns
     ================================================================= */

  .masonry-layout {
    padding: clamp(1rem, 3cqw, 2rem);
  }

  .masonry-layout .masonry-grid {
    display: grid;
    gap: clamp(0.5rem, 2cqw, 1rem);
  }

  /* 1 column for small containers */
  @container card (max-width: 399px) {
    .masonry-layout .masonry-grid {
      grid-template-columns: 1fr;
    }
  }

  /* 2 columns for medium containers */
  @container card (min-width: 400px) and (max-width: 599px) {
    .masonry-layout .masonry-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* 3 columns for large containers */
  @container card (min-width: 600px) {
    .masonry-layout .masonry-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .masonry-layout .masonry-item {
    @apply bg-base-200 rounded-lg overflow-hidden;
  }

  .masonry-layout .masonry-item img {
    width: 100%;
    height: auto;
    display: block;
  }

  .masonry-layout .masonry-item-content {
    padding: clamp(0.5rem, 2cqw, 1rem);
  }

  /* =================================================================
     LAYOUT 4: DASHBOARD LAYOUT
     Header + Sidebar + Main area + Footer
     ================================================================= */

  .dashboard-layout {
    padding: clamp(0.75rem, 2cqw, 1.5rem);
    display: grid;
    gap: clamp(0.75rem, 2cqw, 1.5rem);
  }

  /* Small: vertical stack */
  @container card (max-width: 399px) {
    .dashboard-layout {
      grid-template-areas:
        "header"
        "sidebar"
        "main"
        "footer";
    }
  }

  /* Medium: header/main/footer with 2-column main area */
  @container card (min-width: 400px) and (max-width: 799px) {
    .dashboard-layout {
      grid-template-areas:
        "header header"
        "main main"
        "footer footer";
    }

    .dashboard-layout .dashboard-sidebar {
      display: none;
    }

    .dashboard-layout .dashboard-main {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* Large: full layout with sidebar */
  @container card (min-width: 800px) {
    .dashboard-layout {
      grid-template-columns: 200px 1fr;
      grid-template-areas:
        "header header"
        "sidebar main"
        "footer footer";
    }

    .dashboard-layout .dashboard-main {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .dashboard-layout .dashboard-header {
    grid-area: header;
    padding: clamp(0.5rem, 2cqw, 1rem);
    @apply bg-base-200 rounded-lg;
  }

  .dashboard-layout .dashboard-sidebar {
    grid-area: sidebar;
    padding: clamp(0.5rem, 2cqw, 1rem);
    @apply bg-base-200 rounded-lg;
  }

  .dashboard-layout .dashboard-main {
    grid-area: main;
    display: grid;
    gap: clamp(0.75rem, 2cqw, 1.5rem);
  }

  .dashboard-layout .dashboard-widget {
    padding: clamp(0.75rem, 2cqw, 1.5rem);
    @apply bg-base-200 rounded-lg;
  }

  .dashboard-layout .dashboard-footer {
    grid-area: footer;
    padding: clamp(0.5rem, 2cqw, 1rem);
    @apply bg-base-200 rounded-lg;
  }

  /* =================================================================
     LAYOUT 5: SPLIT LAYOUT
     Two equal sections side by side / stacked
     ================================================================= */

  .split-layout {
    display: grid;
    gap: 0;
    overflow: hidden;
  }

  /* Small: vertical stack */
  @container card (max-width: 399px) {
    .split-layout {
      grid-template-rows: auto auto;
    }
  }

  /* Medium: 60/40 split */
  @container card (min-width: 400px) and (max-width: 599px) {
    .split-layout {
      grid-template-columns: 60% 40%;
    }
  }

  /* Large: 50/50 split */
  @container card (min-width: 600px) {
    .split-layout {
      grid-template-columns: 50% 50%;
    }
  }

  .split-layout .split-left,
  .split-layout .split-right {
    padding: clamp(1rem, 4cqw, 2rem);
  }

  .split-layout .split-left {
    @apply bg-base-200;
  }

  .split-layout .split-right {
    @apply bg-base-100;
  }

  /* =================================================================
     LAYOUT 6: HERO/PRESENTATION LAYOUT
     Large title + full-bleed image for presentations/slides
     Supports image-left or image-right variants
     ================================================================= */

  .hero-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
    overflow: hidden;
    min-height: 400px;
  }

  /* Image on left variant */
  .hero-layout.image-left {
    direction: ltr;
  }

  .hero-layout.image-left .hero-content {
    order: 2;
  }

  .hero-layout.image-left .hero-image {
    order: 1;
  }

  /* Overlay variant - content on top of image */
  .hero-layout.overlay {
    display: block;
    position: relative;
  }

  .hero-layout.overlay .hero-image {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
  }

  .hero-layout.overlay .hero-image::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.3) 100%);
  }

  .hero-layout.overlay .hero-content {
    position: relative;
    z-index: 10;
    width: 100%;
    color: white;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .hero-layout.overlay .hero-title,
  .hero-layout.overlay .hero-subtitle,
  .hero-layout.overlay .hero-description {
    opacity: 1;
  }

  /* Content section */
  .hero-layout .hero-content {
    padding: clamp(2rem, 6cqw, 4rem);
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: clamp(1rem, 3cqw, 2rem);
  }

  /* Image section - full bleed */
  .hero-layout .hero-image {
    position: relative;
    overflow: hidden;
    min-height: 400px;
  }

  .hero-layout .hero-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
  }

  /* Presentation typography - extra large and theme-aware */
  .hero-layout .hero-title {
    font-size: calc(clamp(2rem, 7cqw, 4rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-heading-weight);
    line-height: var(--typo-heading-line-height);
    letter-spacing: var(--typo-heading-spacing);
    text-transform: var(--typo-heading-transform);
  }

  .hero-layout .hero-subtitle {
    font-size: calc(clamp(1rem, 3cqw, 1.5rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-emphasis-weight);
    line-height: var(--typo-body-line-height);
    letter-spacing: var(--typo-body-spacing);
    opacity: 0.8;
  }

  .hero-layout .hero-description {
    font-size: calc(clamp(0.875rem, 2.5cqw, 1.125rem) * var(--typo-scale-adjust));
    font-weight: var(--typo-body-weight);
    line-height: var(--typo-body-line-height);
    letter-spacing: var(--typo-body-spacing);
    opacity: 0.7;
  }

  /* Small containers: vertical stack, image on top */
  @container card (max-width: 599px) {
    .hero-layout {
      grid-template-columns: 1fr;
      grid-template-rows: 250px auto;
    }

    .hero-layout .hero-image {
      order: 1;
      min-height: 250px;
    }

    .hero-layout .hero-content {
      order: 2;
    }

    .hero-layout.image-left .hero-content {
      order: 2;
    }

    .hero-layout.image-left .hero-image {
      order: 1;
    }
  }
}

/* =================================================================
   DEMO PAGE UTILITIES
   ================================================================= */

@layer utilities {
  /* Resizable container styling */
  .resizable-container {
    position: relative;
    min-width: 200px;
    max-width: 1200px;
    border: 2px dashed oklch(var(--bc) / 0.2);
    border-radius: 0.5rem;
    padding: 1rem;
    background: oklch(var(--b2));
    transition: width 150ms ease-out;
  }

  .resize-handle {
    position: absolute;
    top: 0;
    right: -10px;
    bottom: 0;
    width: 20px;
    cursor: ew-resize;
    background: oklch(var(--p) / 0.1);
    border-radius: 0.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.5;
    transition: opacity 200ms, background 200ms;
  }

  .resize-handle:hover,
  .resize-handle:active {
    opacity: 1;
    background: oklch(var(--p) / 0.3);
  }

  .resize-handle::after {
    content: '⋮⋮';
    color: oklch(var(--bc));
    font-size: 1.5rem;
    line-height: 1;
    letter-spacing: -0.25rem;
  }

  .dimension-badge {
    @apply badge badge-primary badge-lg font-mono font-bold;
    min-width: 100px;
    justify-content: center;
  }

  /* Hide class for layout switching */
  .hidden {
    display: none !important;
  }

  /* Screen reader only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* =================================================================
     TYPOGRAPHY OVERRIDE UTILITIES
     Manual control over typography personality across any theme
     ================================================================= */

  /* Force Bold/Futuristic typography */
  .typography-bold,
  .typography-bold * {
    --typo-heading-weight: 900 !important;
    --typo-heading-spacing: 0.05em !important;
    --typo-heading-transform: uppercase !important;
    --typo-heading-line-height: 1.1 !important;
    --typo-body-weight: 500 !important;
    --typo-body-spacing: 0.02em !important;
    --typo-body-line-height: 1.5 !important;
    --typo-emphasis-weight: 700 !important;
    --typo-scale-adjust: 1.05 !important;
  }

  /* Force Soft/Pastel typography */
  .typography-soft,
  .typography-soft * {
    --typo-heading-weight: 600 !important;
    --typo-heading-spacing: 0 !important;
    --typo-heading-transform: none !important;
    --typo-heading-line-height: 1.3 !important;
    --typo-body-weight: 400 !important;
    --typo-body-spacing: 0 !important;
    --typo-body-line-height: 1.7 !important;
    --typo-emphasis-weight: 500 !important;
    --typo-scale-adjust: 0.97 !important;
  }

  /* Force Classic/Professional typography */
  .typography-classic,
  .typography-classic * {
    --typo-heading-weight: 700 !important;
    --typo-heading-spacing: -0.02em !important;
    --typo-heading-transform: none !important;
    --typo-heading-line-height: 1.2 !important;
    --typo-body-weight: 400 !important;
    --typo-body-spacing: 0 !important;
    --typo-body-line-height: 1.6 !important;
    --typo-emphasis-weight: 600 !important;
    --typo-scale-adjust: 1 !important;
  }

  /* Force Quirky/Retro typography */
  .typography-quirky,
  .typography-quirky * {
    --typo-heading-weight: 800 !important;
    --typo-heading-spacing: -0.01em !important;
    --typo-heading-transform: none !important;
    --typo-heading-line-height: 1.15 !important;
    --typo-body-weight: 400 !important;
    --typo-body-spacing: 0.01em !important;
    --typo-body-line-height: 1.6 !important;
    --typo-emphasis-weight: 700 !important;
    --typo-scale-adjust: 1.02 !important;
  }

  /* Enhanced overlay contrast for varying font weights */
  .hero-layout.overlay .hero-image::after {
    /* Stronger gradient for bold themes to ensure contrast */
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.4) 100%);
  }

  /* Extra strong overlay for futuristic themes with heavy text */
  [data-theme="cyberpunk"] .hero-layout.overlay .hero-image::after,
  [data-theme="synthwave"] .hero-layout.overlay .hero-image::after,
  [data-theme="dracula"] .hero-layout.overlay .hero-image::after,
  [data-theme="night"] .hero-layout.overlay .hero-image::after,
  [data-theme="black"] .hero-layout.overlay .hero-image::after,
  [data-theme="luxury"] .hero-layout.overlay .hero-image::after {
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.5) 100%);
  }

  /* Enhanced text shadow for overlay text based on theme weight */
  [data-theme="cyberpunk"] .hero-layout.overlay .hero-content,
  [data-theme="synthwave"] .hero-layout.overlay .hero-content,
  [data-theme="dracula"] .hero-layout.overlay .hero-content,
  [data-theme="night"] .hero-layout.overlay .hero-content,
  [data-theme="black"] .hero-layout.overlay .hero-content,
  [data-theme="luxury"] .hero-layout.overlay .hero-content {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  /* Lighter shadow for soft themes */
  [data-theme="cupcake"] .hero-layout.overlay .hero-content,
  [data-theme="pastel"] .hero-layout.overlay .hero-content,
  [data-theme="valentine"] .hero-layout.overlay .hero-content,
  [data-theme="fantasy"] .hero-layout.overlay .hero-content,
  [data-theme="garden"] .hero-layout.overlay .hero-content,
  [data-theme="lemonade"] .hero-layout.overlay .hero-content {
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(0, 0, 0, 0.2);
  }
}
