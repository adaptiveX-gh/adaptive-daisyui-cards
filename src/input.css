@tailwind base;
@tailwind components;
@tailwind utilities;

/* =================================================================
   ADAPTIVE CARD SYSTEM - Base Styles
   Cards that scale based on their container size using Container Queries
   ================================================================= */

@layer components {

  /* Card container - provides container query context */
  .card-container {
    container-type: inline-size;
    container-name: card;
  }

  /* Base adaptive card */
  .adaptive-card {
    @apply card bg-base-100 shadow-xl;
    container-type: inline-size;
    transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Layout card base (for all layout types) */
  .layout-card {
    @apply card bg-base-100 shadow-xl;
    transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* =================================================================
     SCALABLE TYPOGRAPHY
     Font sizes scale proportionally with container width
     ================================================================= */

  .adaptive-text-xs {
    font-size: clamp(0.75rem, 1.5cqw, 0.875rem);
  }

  .adaptive-text-sm {
    font-size: clamp(0.875rem, 2cqw, 1rem);
  }

  .adaptive-text-base {
    font-size: clamp(1rem, 2.5cqw, 1.125rem);
  }

  .adaptive-text-lg {
    font-size: clamp(1.125rem, 3cqw, 1.25rem);
  }

  .adaptive-text-xl {
    font-size: clamp(1.25rem, 3.5cqw, 1.5rem);
  }

  .adaptive-text-2xl {
    font-size: clamp(1.5rem, 4cqw, 2rem);
  }

  .adaptive-text-3xl {
    font-size: clamp(1.875rem, 5cqw, 2.5rem);
  }

  /* =================================================================
     LAYOUT 1: SIDEBAR LAYOUT
     Image on left/top, content on right/bottom
     ================================================================= */

  .sidebar-layout {
    display: flex;
    flex-direction: row;
    overflow: hidden;
  }

  .sidebar-layout .sidebar-image {
    width: 300px;
    min-width: 300px;
    height: auto;
    object-fit: cover;
  }

  .sidebar-layout .sidebar-content {
    padding: clamp(1rem, 4cqw, 2rem);
    display: flex;
    flex-direction: column;
    flex: 1;
  }

  /* Small containers: vertical stack */
  @container card (max-width: 599px) {
    .sidebar-layout {
      flex-direction: column;
    }

    .sidebar-layout .sidebar-image {
      width: 100%;
      min-width: 100%;
      height: 200px;
    }
  }

  /* =================================================================
     LAYOUT 2: FEATURE LAYOUT
     Header + responsive grid (1-3 columns)
     ================================================================= */

  .feature-layout {
    padding: clamp(1rem, 3cqw, 2rem);
  }

  .feature-layout .feature-header {
    margin-bottom: clamp(1rem, 3cqw, 2rem);
  }

  .feature-layout .feature-grid {
    display: grid;
    gap: clamp(1rem, 3cqw, 1.5rem);
  }

  /* 1 column for small containers */
  @container card (max-width: 399px) {
    .feature-layout .feature-grid {
      grid-template-columns: 1fr;
    }
  }

  /* 2 columns for medium containers */
  @container card (min-width: 400px) and (max-width: 599px) {
    .feature-layout .feature-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* 3 columns for large containers */
  @container card (min-width: 600px) {
    .feature-layout .feature-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .feature-layout .feature-item {
    padding: clamp(0.75rem, 2cqw, 1.5rem);
    @apply bg-base-200 rounded-lg;
  }

  /* =================================================================
     LAYOUT 3: MASONRY LAYOUT
     Image gallery with responsive columns
     ================================================================= */

  .masonry-layout {
    padding: clamp(1rem, 3cqw, 2rem);
  }

  .masonry-layout .masonry-grid {
    display: grid;
    gap: clamp(0.5rem, 2cqw, 1rem);
  }

  /* 1 column for small containers */
  @container card (max-width: 399px) {
    .masonry-layout .masonry-grid {
      grid-template-columns: 1fr;
    }
  }

  /* 2 columns for medium containers */
  @container card (min-width: 400px) and (max-width: 599px) {
    .masonry-layout .masonry-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* 3 columns for large containers */
  @container card (min-width: 600px) {
    .masonry-layout .masonry-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .masonry-layout .masonry-item {
    @apply bg-base-200 rounded-lg overflow-hidden;
  }

  .masonry-layout .masonry-item img {
    width: 100%;
    height: auto;
    display: block;
  }

  .masonry-layout .masonry-item-content {
    padding: clamp(0.5rem, 2cqw, 1rem);
  }

  /* =================================================================
     LAYOUT 4: DASHBOARD LAYOUT
     Header + Sidebar + Main area + Footer
     ================================================================= */

  .dashboard-layout {
    padding: clamp(0.75rem, 2cqw, 1.5rem);
    display: grid;
    gap: clamp(0.75rem, 2cqw, 1.5rem);
  }

  /* Small: vertical stack */
  @container card (max-width: 399px) {
    .dashboard-layout {
      grid-template-areas:
        "header"
        "sidebar"
        "main"
        "footer";
    }
  }

  /* Medium: header/main/footer with 2-column main area */
  @container card (min-width: 400px) and (max-width: 799px) {
    .dashboard-layout {
      grid-template-areas:
        "header header"
        "main main"
        "footer footer";
    }

    .dashboard-layout .dashboard-sidebar {
      display: none;
    }

    .dashboard-layout .dashboard-main {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* Large: full layout with sidebar */
  @container card (min-width: 800px) {
    .dashboard-layout {
      grid-template-columns: 200px 1fr;
      grid-template-areas:
        "header header"
        "sidebar main"
        "footer footer";
    }

    .dashboard-layout .dashboard-main {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .dashboard-layout .dashboard-header {
    grid-area: header;
    padding: clamp(0.5rem, 2cqw, 1rem);
    @apply bg-base-200 rounded-lg;
  }

  .dashboard-layout .dashboard-sidebar {
    grid-area: sidebar;
    padding: clamp(0.5rem, 2cqw, 1rem);
    @apply bg-base-200 rounded-lg;
  }

  .dashboard-layout .dashboard-main {
    grid-area: main;
    display: grid;
    gap: clamp(0.75rem, 2cqw, 1.5rem);
  }

  .dashboard-layout .dashboard-widget {
    padding: clamp(0.75rem, 2cqw, 1.5rem);
    @apply bg-base-200 rounded-lg;
  }

  .dashboard-layout .dashboard-footer {
    grid-area: footer;
    padding: clamp(0.5rem, 2cqw, 1rem);
    @apply bg-base-200 rounded-lg;
  }

  /* =================================================================
     LAYOUT 5: SPLIT LAYOUT
     Two equal sections side by side / stacked
     ================================================================= */

  .split-layout {
    display: grid;
    gap: 0;
    overflow: hidden;
  }

  /* Small: vertical stack */
  @container card (max-width: 399px) {
    .split-layout {
      grid-template-rows: auto auto;
    }
  }

  /* Medium: 60/40 split */
  @container card (min-width: 400px) and (max-width: 599px) {
    .split-layout {
      grid-template-columns: 60% 40%;
    }
  }

  /* Large: 50/50 split */
  @container card (min-width: 600px) {
    .split-layout {
      grid-template-columns: 50% 50%;
    }
  }

  .split-layout .split-left,
  .split-layout .split-right {
    padding: clamp(1rem, 4cqw, 2rem);
  }

  .split-layout .split-left {
    @apply bg-base-200;
  }

  .split-layout .split-right {
    @apply bg-base-100;
  }
}

/* =================================================================
   DEMO PAGE UTILITIES
   ================================================================= */

@layer utilities {
  /* Resizable container styling */
  .resizable-container {
    position: relative;
    min-width: 200px;
    max-width: 1200px;
    border: 2px dashed oklch(var(--bc) / 0.2);
    border-radius: 0.5rem;
    padding: 1rem;
    background: oklch(var(--b2));
    transition: width 150ms ease-out;
  }

  .resize-handle {
    position: absolute;
    top: 0;
    right: -10px;
    bottom: 0;
    width: 20px;
    cursor: ew-resize;
    background: oklch(var(--p) / 0.1);
    border-radius: 0.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.5;
    transition: opacity 200ms, background 200ms;
  }

  .resize-handle:hover,
  .resize-handle:active {
    opacity: 1;
    background: oklch(var(--p) / 0.3);
  }

  .resize-handle::after {
    content: '⋮⋮';
    color: oklch(var(--bc));
    font-size: 1.5rem;
    line-height: 1;
    letter-spacing: -0.25rem;
  }

  .dimension-badge {
    @apply badge badge-primary badge-lg font-mono font-bold;
    min-width: 100px;
    justify-content: center;
  }

  /* Hide class for layout switching */
  .hidden {
    display: none !important;
  }

  /* Screen reader only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
}
